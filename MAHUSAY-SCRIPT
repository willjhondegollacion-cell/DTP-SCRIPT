-- [[ BODIK V89: PRIVATE OWNER-LOCK FIXED ]] --
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- ILISI KINI SA IMONG TINUOD NGA ROBLOX ID --
local OWNER_ID = 10479954881 -- Gibutang nako ang ID gikan sa imong Script.txt 

-- Check kung ang naggamit mao ba ang tag-iya
if LocalPlayer.UserId ~= OWNER_ID then 
    LocalPlayer:Kick("ERROR: This script can't be used anymore the things inside it are broken!")
    return 
end

-- [[ PADAYON ANG SCRIPT KUNG IKAW ANG TAG-IYA ]] --
print("Welcome, Owner!")

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")
local STATS_FILE = "BodikStats.txt"
local BLACKLIST_FILE = "BodikBlacklist.json"

local function GET_BLACKLIST() 
    if isfile and isfile(BLACKLIST_FILE) then 
        local s, d = pcall(function() return HttpService:JSONDecode(readfile(BLACKLIST_FILE)) end) 
        return s and d or {} 
    end
    return {} 
end

local function SAVE_BLACKLIST(id) 
    local v = GET_BLACKLIST()
    v[id] = os.time()
    if writefile then writefile(BLACKLIST_FILE, HttpService:JSONEncode(v)) end 
end

local function GET_STATS() 
    if isfile and isfile(STATS_FILE) then return tonumber(readfile(STATS_FILE)) or 0 end
    return 0 
end

local function SAVE_STATS(v) 
    if writefile then pcall(function() writefile(STATS_FILE, tostring(v)) end) end 
end

local total_claimed = GET_STATS()

function START_FARM()
    if LocalPlayer.PlayerGui:FindFirstChild("BodikGui") then LocalPlayer.PlayerGui.BodikGui:Destroy() end
    
    local sg = Instance.new("ScreenGui", LocalPlayer.PlayerGui)
    sg.Name = "BodikGui"
    
    local label = Instance.new("TextLabel", sg)
    label.Size = UDim2.new(0, 250, 0, 70)
    label.Position = UDim2.new(0.5, -125, 0, 50)
    label.BackgroundColor3 = Color3.new(0, 0, 0)
    label.BackgroundTransparency = 0.5
    label.TextColor3 = Color3.new(0, 1, 1)
    label.TextSize = 14
    label.Font = Enum.Font.Code
    
    local function update_gui(status_text) 
        label.Text = "[BODIK V89 PRIVATE]\nSTATUS: " .. status_text .. "\nCLAIMED: " .. total_claimed 
    end
    
    repeat task.wait() until LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    local hrp = LocalPlayer.Character.HumanoidRootPart
    local cam = workspace.CurrentCamera
 
    -- AUTO-GHOST & AUTO-UNEQUIP [cite: 8, 9, 10]
    local function stealth_mode()
        local tool = LocalPlayer.Backpack:FindFirstChildWhichIsA("Tool") or LocalPlayer.Character:FindFirstChildWhichIsA("Tool")
        if tool then 
            LocalPlayer.Character.Humanoid:EquipTool(tool)
            task.wait(0.2)
            tool:Activate()
            task.wait(0.2)
            LocalPlayer.Character.Humanoid:UnequipTools()
            update_gui("STEALTH ACTIVE")
        end
    end
    
    stealth_mode()
 
    LocalPlayer.CameraMode = Enum.CameraMode.LockFirstPerson
    LocalPlayer.CameraMaxZoomDistance = 0.5
    update_gui("FARMING...")
    
    local targets = {}
    for _, p in pairs(workspace:GetDescendants()) do 
        if p:IsA("ProximityPrompt") then
            local aT, oT, pN = p.ActionText:lower(), p.ObjectText:lower(), p.Parent.Name:lower()
            local isShop = aT:find("buy") or aT:find("purchase") or aT:find("coin") or pN:find("shop") or oT:find("coin")
            if (aT:find("claim") or oT:find("booth")) and not isShop then 
                table.insert(targets, p) 
            end 
        end
    end
 
    if #targets > 0 then
        for i, prompt in pairs(targets) do
            update_gui("PRIVATE CLAIM " .. i .. "/" .. #targets)
            local parent = prompt.Parent:IsA("BasePart") and prompt.Parent or prompt.Parent:FindFirstChildWhichIsA("BasePart")
            if not parent then continue end
            
            cam.CameraType = Enum.CameraType.Scriptable
            hrp.CFrame = CFrame.new(parent.Position + Vector3.new(0, 1.2, 0))
            cam.CFrame = CFrame.new(hrp.Position + Vector3.new(0, 0.5, 0)) * CFrame.Angles(math.rad(-90), 0, 0)
            
            task.wait(0.3)
            prompt.HoldDuration = 0
            prompt.RequiresLineOfSight = false
            fireproximityprompt(prompt)
            
            local event = ReplicatedStorage:FindFirstChild("Events") and (ReplicatedStorage.Events:FindFirstChild("UnclaimBooth") or ReplicatedStorage.Events:FindFirstChild("Unclaim"))
            if event then event:FireServer() end
            
            total_claimed = total_claimed + 1
            SAVE_STATS(total_claimed)
            task.wait(0.1)
        end
    end
 
    update_gui("SERVER HOP...")
    SAVE_BLACKLIST(game.JobId)
    
    local blacklist = GET_BLACKLIST()
    local ok, res = pcall(function() 
        return HttpService:JSONDecode(game:HttpGet("https://games.roblox.com/v1/games/" .. game.PlaceId .. "/servers/Public?sortOrder=Desc&limit=100")) 
    end)
    
    if ok and res.data then 
        for _, sv in pairs(res.data) do 
            if sv.id ~= game.JobId and sv.playing < sv.maxPlayers and not blacklist[sv.id] then 
                TeleportService:TeleportToPlaceInstance(game.PlaceId, sv.id, LocalPlayer)
                return
            end
        end 
    end
    
    if writefile then writefile(BLACKLIST_FILE, "{}") end
    task.wait(1)
    START_FARM()
end

START_FARM()
